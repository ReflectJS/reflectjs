<!DOCTYPE html>
<html :test=[[() => {
  const e = document.getElementById('content');
  const s = e.textContent.replace(/\s+/g, ' ').trim();
  return (s === 'root [div] a [div] a1 [div] [/div] a2 [div] [/div] [/div] b [div] [/div] c [div] [/div] [/div]' ? 'OK' : s);
}]]>
  <body :data=[[{
    name: 'root',
    list: [
      { name: 'a', list: [
        { name: 'a1' },
        { name: 'a2' },
      ] },
      { name: 'b' },
      { name: 'c', list: [
      ] },
    ]
  }]]>
    <div id="content">
      <ul :data=[[data]] :nestFor=[[data.list]] :nestIn="div">
        <li><span>[[data.name]]</span></li>
        [div]
        <div></div>
        [/div]
      </ul>
    </div>
  </body>
</html>
