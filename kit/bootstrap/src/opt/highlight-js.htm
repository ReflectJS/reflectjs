<lib>
  <!--- https://highlightjs.org -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

  <:define tag="highlight-js:pre" class="highlight-js"
           :source=""
           :lang="[[null]]"
           :handle-source=[[
             if (window.hljs) {
               const res = lang
                 ? window.hljs.highlight(source, { language: lang })
                 : window.hljs.highlightAuto(source);
               __dom.firstElementChild.innerHTML = res.value;
             } else {
               __dom.firstElementChild.innerText = source;
             }
           ]]><code></code></:define>
</lib>
